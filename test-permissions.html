<!DOCTYPE html>
<html>
<head>
    <title>Firebase Permissions Test</title>
    <script type="module">
        // This will help identify which Firebase operation is failing
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        // Replace with your Firebase config from Firebase Console
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        async function testCollection(collectionName) {
            try {
                console.log(`Testing ${collectionName}...`);
                const snapshot = await getDocs(collection(db, collectionName));
                console.log(`✅ ${collectionName}: ${snapshot.size} documents`);
                return { collection: collectionName, status: 'success', count: snapshot.size };
            } catch (error) {
                console.error(`❌ ${collectionName}: ${error.message}`);
                return { collection: collectionName, status: 'error', error: error.message };
            }
        }
        
        async function runTests() {
            const collections = ['reviews', 'services', 'users', 'bookings', 'appointments'];
            const results = [];
            
            for (const col of collections) {
                const result = await testCollection(col);
                results.push(result);
            }
            
            console.log('\n=== RESULTS ===');
            console.table(results);
        }
        
        runTests();
    </script>
</head>
<body>
    <h1>Check Browser Console</h1>
    <p>Open the browser console (F12) to see which Firebase collections are causing permissions errors.</p>
</body>
</html>
