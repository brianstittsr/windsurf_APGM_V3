<!DOCTYPE html>
<html>
<head>
    <title>Firestore Rules Test</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <h1>Firestore Rules Test</h1>
    <div id="results"></div>
    
    <script>
        // You'll need to replace these with your actual Firebase config
        const firebaseConfig = {
            // Add your Firebase config here
            apiKey: "your-api-key",
            authDomain: "your-project.firebaseapp.com",
            projectId: "your-project-id",
            storageBucket: "your-project.appspot.com",
            messagingSenderId: "123456789",
            appId: "your-app-id"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const results = document.getElementById('results');
        
        async function testRules() {
            results.innerHTML = '<p>Testing Firestore rules...</p>';
            
            try {
                // Test userActivities collection
                console.log('Testing userActivities collection...');
                const userActivities = await db.collection('userActivities').limit(1).get();
                results.innerHTML += '<p>❌ userActivities: Access granted (rules may not be deployed)</p>';
            } catch (error) {
                console.log('userActivities error:', error.code);
                results.innerHTML += '<p>✅ userActivities: Access denied (rules working)</p>';
            }
            
            try {
                // Test pdfDocuments collection
                console.log('Testing pdfDocuments collection...');
                const pdfDocs = await db.collection('pdfDocuments').limit(1).get();
                results.innerHTML += '<p>❌ pdfDocuments: Access granted (rules may not be deployed)</p>';
            } catch (error) {
                console.log('pdfDocuments error:', error.code);
                results.innerHTML += '<p>✅ pdfDocuments: Access denied (rules working)</p>';
            }
            
            try {
                // Test services collection
                console.log('Testing services collection...');
                const services = await db.collection('services').limit(1).get();
                results.innerHTML += '<p>❌ services: Access granted (rules may not be deployed)</p>';
            } catch (error) {
                console.log('services error:', error.code);
                results.innerHTML += '<p>✅ services: Access denied (rules working)</p>';
            }
        }
        
        testRules();
    </script>
</body>
</html>
